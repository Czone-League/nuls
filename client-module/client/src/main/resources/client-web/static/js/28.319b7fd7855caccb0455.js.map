{"version":3,"sources":["webpack:///src/pages/wallet/Transfer.vue","webpack:///./src/pages/wallet/Transfer.vue?48a3","webpack:///./src/pages/wallet/Transfer.vue"],"names":["Transfer","data","_this2","this","accountAddressValue","localStorage","getItem","submitId","usable","fee","accountAddress","remnant","address","transferForm","outName","joinAddress","joinNo","serviceNo","remark","transferRules","selectAddress","validator","rule","value","callback","Error","$t","checkPass","$refs","validateField","trigger","exec","setTimeout","values","bignumber","nu","comparedTo","minus","userAddressList","dialogTableVisible","components","Back","BackBar","AccountAddressBar","Password","PasswordBar","mounted","getBalanceAddress","methods","url","_this3","$fetch","then","response","success","leftShift","parseFloat","times","toString","chenckAccountAddress","chenckAddress","setItem","countFee","accountCopy","_copy_to_clipboard_3_0_8_copy_to_clipboard_default","$message","message","type","duration","allUsable","balance","_this4","config","openDB","indexedDB","open","onupgradeneeded","e","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","autoIncrement","toUsersAddressList","dbData","onsuccess","event","transaction","objectStore","openCursor","cursor","push","continue","checkedAddress","dbcheckedAddress","row","userAddress","_this5","rightShift","params","replace","transferSubmit","fromName","_this6","validate","valid","password","showPassword","$confirm","confirmButtonText","cancelButtonText","toSubmit","catch","_this7","param","$post","sessionStorage","$router","name","msg","wallet_Transfer","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","backTitle","_v","_s","ref","model","rules","label","on","data-clipboard-text","title","click","prop","change","$$v","$set","trim","expression","maxlength","id","$event","visible","update:visible","row-dblclick","property","min-width","align","width","scopedSlots","_u","key","fn","scope","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/28.319b7fd7855caccb0455.js","sourcesContent":["<template>\n  <div class=\"transfer\">\n    <Back :backTitle=\"this.$t('message.walletManagement')\"></Back>\n    <div class=\"transfer-info\">\n      <h2>NULS {{$t('message.transfer')}}</h2>\n\n      <el-form :model=\"transferForm\" :rules=\"transferRules\" ref=\"transferForm\">\n        <el-form-item :label=\"$t('message.sourceAddress')+'：'\" class=\"out-address\">\n          <AccountAddressBar @chenckAccountAddress=\"chenckAccountAddress\"></AccountAddressBar>\n          <i class=\"copy_icon copyBtn cursor-p\" :data-clipboard-text=\"accountAddressValue\"\n             @click=\"accountCopy\" :title=\"$t('message.c143')\"></i>\n        </el-form-item>\n        <el-form-item :label=\"$t('message.destinationAddress')+'：'\" prop=\"joinAddress\">\n          <el-input type=\"text\" v-model.trim=\"transferForm.joinAddress\" ref=\"joinAddress\" @change=\"countFee\"></el-input>\n          <i class=\"cursor-p icons\" @click=\"toUsersAddressList\"></i>\n        </el-form-item>\n        <el-form-item :label=\"$t('message.transferAmount')+'：'\" prop=\"joinNo\">\n          <span class=\"allUsable\">{{$t('message.currentBalance')}}: {{usable}} NULS</span>\n          <el-input type=\"text\" v-model=\"transferForm.joinNo\" :maxlength=\"17\" @change=\"countFee\"></el-input>\n         <!-- <span class=\"allNo\" @click=\"allUsable(usable)\">{{$t('message.all')}}</span>-->\n        </el-form-item>\n        <el-form-item :label=\"$t('message.remarks')+'：'\">\n          <el-input type=\"textarea\" v-model.trim=\"transferForm.remark\"\n                    :maxlength=\"30\" @change=\"countFee\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('message.c28')+': '+this.fee+' NULS'\">\n        </el-form-item>\n        <el-form-item class=\"transfer-submit\">\n          <el-button type=\"primary\" @click=\"transferSubmit('transferForm')\" id=\"transferSubmit\">\n            {{$t('message.c114')}}\n          </el-button>\n        </el-form-item>\n      </el-form>\n\n      <el-dialog :visible.sync=\"dialogTableVisible\" class=\"transfer-dialog\">\n        <el-table :data=\"userAddressList\" @row-dblclick=\"dbcheckedAddress\">\n          <el-table-column property=\"userAddress\" :label=\"$t('message.tabName')\" min-width=\"280\"\n                           align='center'></el-table-column>\n          <el-table-column property=\"userAlias\" :label=\"$t('message.tabAlias')\" width=\"70\"\n                           align='center'></el-table-column>\n          <el-table-column property=\"userHelp\" :label=\"$t('message.remarks')\" width=\"110\"\n                           align='center'></el-table-column>\n          <el-table-column :label=\"$t('message.operation')\" width=\"100\" align='center'>\n            <template slot-scope=\"scope\">\n              <span class=\"cursor-p text-d\"\n                    @click=\"checkedAddress(scope.row.userAddress)\">{{$t('message.select')}}</span>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-dialog>\n      <Password ref=\"password\" @toSubmit=\"toSubmit\" :submitId=\"submitId\"></Password>\n    </div>\n  </div>\n</template>\n<script>\n  import Back from '@/components/BackBar.vue'\n  import AccountAddressBar from '@/components/AccountAddressBar.vue'\n  import Password from '@/components/PasswordBar.vue'\n  import copy from 'copy-to-clipboard'\n  import * as config from '@/config.js'\n  import {BigNumber} from 'bignumber.js'\n\n  export default {\n    data() {\n      let selectAddress = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error(this.$t('message.addressNull')))\n        } else {\n          if (this.transferForm.checkPass !== '') {\n            this.$refs.transferForm.validateField('joinNo')\n          }\n          callback()\n        }\n      };\n      let checkJoinAddress = (rule, value, callback) => {\n        if (!value ) {\n          callback(new Error(this.$t('message.transferNull')))\n        } else {\n          this.address = localStorage.getItem('newAccountAddress');\n          let re = /[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/;\n          if (!re.exec(value)) {\n            callback(new Error(this.$t('message.c168')))\n          } else if (value === this.address) {\n            callback(new Error(this.$t('message.addressOrTransfer')))\n          } else {\n            callback()\n          }\n        }\n      };\n      let checkJoinNo = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('message.transferNO')))\n        }\n        setTimeout(() => {\n          //console.log(value);\n          let re = /(^\\+?|^\\d?)\\d*\\.?\\d+$/;\n          let res = /^\\d{1,8}(\\.\\d{1,8})?$/;\n          if (!re.exec(value)) {\n            callback(new Error(this.$t('message.transferNO1')))\n          } else {\n            let values = new BigNumber(value);\n            let nu = new BigNumber(this.usable);\n            if (values.comparedTo(nu.minus(0.01)) === 1) {\n              callback(new Error(this.$t('message.transferNO2')))\n            } else if (value < 0.01) {\n              callback(new Error(this.$t('message.transferNO3')))\n            } else if (!res.exec(value)) {\n              callback(new Error(this.$t('message.c136')))\n            } else {\n              callback()\n            }\n          }\n        }, 100)\n\n      };\n      return {\n        accountAddressValue: localStorage.getItem('newAccountAddress'),\n        submitId: 'transferSubmit',\n        usable: 0,\n        fee: 0.00,\n        accountAddress: [],\n        remnant: 0,\n        address: localStorage.getItem('newAccountAddress'),\n        transferForm: {\n          address: localStorage.getItem('newAccountAddress'),\n          outName: '',\n          joinAddress: '',\n          joinNo: '',\n          serviceNo: '',\n          remark: ''\n        },\n        transferRules: {\n          selectAddress: [\n            {validator: selectAddress, trigger: 'blur'}\n          ],\n          joinAddress: [\n            {validator: checkJoinAddress, trigger: 'blur'}\n          ],\n          joinNo: [\n            {validator: checkJoinNo, trigger: 'blur'}\n          ]\n        },\n        userAddressList: [],\n        dialogTableVisible: false,\n      }\n    },\n    components: {\n      Back,\n      AccountAddressBar,\n      Password,\n    },\n    mounted() {\n      let _this = this;\n      //this.openDB();\n      if (this.address === '') {\n        this.address = localStorage.getItem('newAccountAddress')\n      }\n      this.getBalanceAddress('/accountledger/balance/' + this.address)\n    },\n    methods: {\n      /**\n       *根据账户地址获取账户余额\n       * Get the balance of the account according to the account address\n       * @param url\n       */\n      getBalanceAddress(url) {\n        this.$fetch(url)\n          .then((response) => {\n            //console.log(response);\n            if (response.success) {\n              let leftShift = new BigNumber(0.00000001);\n              this.usable = parseFloat(leftShift.times(response.data.usable.value).toString())\n            }\n          })\n      },\n\n      /**\n       * 获取下拉选择地址\n       *Get the drop-down selection address\n       * @param chenckAddress\n       */\n      chenckAccountAddress(chenckAddress) {\n        this.address = chenckAddress;\n        this.accountAddressValue = chenckAddress;\n        localStorage.setItem('newAccountAddress', this.address);\n        this.getBalanceAddress('/accountledger/balance/' + chenckAddress);\n        this.$refs.transferForm.validateField('joinAddress');\n        this.$refs.transferForm.validateField('joinNo');\n        this.countFee();\n      },\n\n      /**\n       * 复制功能\n       * copy\n       */\n      accountCopy() {\n        //javaUtil.copy(this.accountAddressValue);\n        copy(this.accountAddressValue);\n        this.$message({\n          message: this.$t('message.c129'), type: 'success', duration: '800'\n        })\n      },\n\n      /**\n       * 选择全部金额\n       * Choose the total amount\n       * @param balance\n       */\n      allUsable(balance) {\n        if (balance === 0) {\n          this.$message({\n            message: this.$t('message.creditLow'),\n            type: 'warning '\n          })\n        } else {\n          this.countFee(balance);\n          setTimeout(() => {\n            this.transferForm.joinNo = config.FloatSub(balance, 0.01);\n            this.$refs.transferForm.validateField('joinAddress');\n            this.$refs.transferForm.validateField('joinNo')\n          }, 500);\n\n\n        }\n      },\n\n      /**\n       * 创建usersDB\n       * New usersDB\n       */\n      openDB() {\n        let request = indexedDB.open('usersDB', 1)\n        request.onupgradeneeded = function (e) {\n          let db = e.target.result\n          // 如果不存在Users对象仓库则创建\n          if (!db.objectStoreNames.contains('usersDB')) {\n            let store = db.createObjectStore('addressList', {keyPath: 'userAddress', autoIncrement: false})\n          }\n        }\n      },\n\n      /**\n       * 选择通讯录\n       * Select the address book\n       */\n      toUsersAddressList() {\n        /*this.$message({\n          type: 'info', message: this.$t('message.c65'), duration: '800'\n        })*/\n        this.dialogTableVisible = true;\n         let request = indexedDB.open('usersDB', 1);\n         let dbData = [];\n         request.onsuccess = function (event) {\n           let db = event.target.result;\n           let tx = db.transaction('addressList', 'readonly');\n           let store = tx.objectStore('addressList');\n           // 打开游标，遍历customers中所有数据\n           store.openCursor().onsuccess = function (event) {\n             let cursor = event.target.result;\n             if (cursor) {\n               dbData.push(cursor.value);\n               cursor.continue()\n             }\n           }\n         };\n         this.userAddressList = dbData\n      },\n\n      /**\n       * 选中通讯录地址\n       *Address the address of the address book\n       * @param address\n       */\n      checkedAddress(address) {\n        this.transferForm.joinAddress = address;\n        this.dialogTableVisible = false\n      },\n\n      /**\n       * 双击选择通讯录地址\n       *Double click the address book address\n       * @param row\n       * @param event\n       */\n      dbcheckedAddress(row, event) {\n        this.transferForm.joinAddress = row.userAddress\n        this.dialogTableVisible = false\n      },\n\n      /**\n       *计算手续费\n       *Calculation fee\n       **/\n      countFee() {\n        //console.log(\"feeOk=\"+this.transferForm.joinAddress !=='' && this.transferForm.joinNo > 0);\n        if (this.transferForm.joinAddress !== '' && this.transferForm.joinNo > 0) {\n          let rightShift = new BigNumber(100000000);\n          let params = \"address=\" + this.address\n            + \"&toAddress=\" + this.transferForm.joinAddress\n            + \"&amount=\" + rightShift.times(this.transferForm.joinNo)\n            + \"&remark=\" + this.transferForm.remark.replace(/\\n/g, \"\");\n          //console.log(\"params==\"+params);\n          this.$fetch('/accountledger/transfer/fee?' + params)\n            .then((response) => {\n              //console.log(response);\n              if (response.success) {\n                let leftShift = new BigNumber(0.00000001);\n                this.fee = leftShift.times(response.data.value);\n              }\n            });\n        }\n      },\n\n      /**\n       * 确认转账\n       * Confirmation of transfer\n       * @param fromName\n       */\n      transferSubmit(fromName) {\n        this.$refs[fromName].validate((valid) => {\n          if (valid) {\n            if (localStorage.getItem('encrypted') === \"true\") {\n              this.$refs.password.showPassword(true)\n            } else {\n              this.$confirm(this.$t('message.c172'), '', {\n                confirmButtonText: this.$t('message.confirmButtonText'),\n                cancelButtonText: this.$t('message.cancelButtonText'),\n              }).then(() => {\n                this.toSubmit('')\n              }).catch(() => {\n\n              })\n            }\n          } else {\n            return false\n          }\n        })\n      },\n\n      /**\n       * 输入密码确定交易\n       *Enter the password to determine the transaction\n       * @param password\n       */\n      toSubmit(password) {\n        let rightShift = new BigNumber(100000000);\n        let param = '{\"address\":\"' + this.address\n          + '\",\"toAddress\":\"' + this.transferForm.joinAddress\n          + '\",\"amount\":' + rightShift.times(this.transferForm.joinNo)\n          + ',\"password\":\"' + password\n          + '\",\"remark\":\"' + this.transferForm.remark.replace(/\\n/g, \"\") + '\"}';\n        //console.log(\"param======\" + param)\n        this.$post('/accountledger/transfer', param)\n          .then((response) => {\n            //console.log(\"param=\" + param)\n            //console.log(response)\n            if (response.success) {\n              this.$message({\n                message: this.$t('message.passWordSuccess'),\n                type: 'success'\n              });\n              this.transferForm.joinAddress = '';\n              this.transferForm.joinNo = '';\n              this.transferForm.remark = '';\n              this.getBalanceAddress('/account/balance/' + this.transferForm.address);\n              sessionStorage.setItem('walletActiveName', 'second');\n              this.$router.push({\n                name: '/wallet',\n              })\n            } else {\n              this.$message({\n                message: this.$t('message.passWordFailed') + response.msg,\n                type: 'warning',\n              })\n            }\n          })\n      },\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import url(\"../../assets/css/style.less\");\n\n  .transfer {\n    width: 1024px;\n    margin: auto;\n    .transfer-info {\n      width: 90%;\n      margin: auto;\n      h2 {\n        text-align: center;\n        line-height: 30px;\n        height: 50px;\n      }\n      .el-form {\n        width: 60%;\n        margin: auto;\n        .el-form-item {\n          margin-bottom: 24px;\n          .el-form-item__label {\n            color: #ffffff;\n            padding: 0 5px 0 0;\n            line-height: 20px;\n          }\n          .el-form-item__content {\n            .address-select {\n              width: 550px;\n              .sub-selected-value {\n                .sub-select-list {\n                  margin-left: -3px;\n                  .sub-select-item {\n                    width: 547px;\n                  }\n                }\n              }\n            }\n            .copy_icon {\n              position: absolute;\n              top: 2px;\n              right: -33px;\n              width: 30px;\n              height: 20px;\n              display: block;\n              float: left;\n              background-size: @bg-size;\n              background: @bg-image -198px -46px;\n            }\n            .icons {\n              width: 25px;\n              height: 25px;\n              background-size: @bg-size;\n              background: @bg-image -54px -74px;\n              position: relative;\n              z-index: 8;\n              float: right;\n              margin-top: -35px;\n              margin-right: 0;\n            }\n            .el-form-item__error {\n              top: 85%;\n            }\n            .allUsable {\n              line-height: 20px;\n            }\n            .allNo {\n              margin-top: -40px;\n            }\n            .el-button--primary {\n              margin-top: 30px;\n            }\n            .el-input {\n              .el-input__inner {\n                color: #ffffff;\n                padding: 0 5px;\n              }\n            }\n            .el-textarea {\n              .el-textarea__inner {\n                color: #ffffff;\n                padding: 5px;\n                border-radius: 1px;\n              }\n            }\n          }\n        }\n        .out-address {\n          .el-form-item__label {\n            line-height: 30px;\n            float: none;\n          }\n        }\n        .transfer-submit {\n          text-align: center;\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/wallet/Transfer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"transfer\"},[_c('Back',{attrs:{\"backTitle\":this.$t('message.walletManagement')}}),_vm._v(\" \"),_c('div',{staticClass:\"transfer-info\"},[_c('h2',[_vm._v(\"NULS \"+_vm._s(_vm.$t('message.transfer')))]),_vm._v(\" \"),_c('el-form',{ref:\"transferForm\",attrs:{\"model\":_vm.transferForm,\"rules\":_vm.transferRules}},[_c('el-form-item',{staticClass:\"out-address\",attrs:{\"label\":_vm.$t('message.sourceAddress')+'：'}},[_c('AccountAddressBar',{on:{\"chenckAccountAddress\":_vm.chenckAccountAddress}}),_vm._v(\" \"),_c('i',{staticClass:\"copy_icon copyBtn cursor-p\",attrs:{\"data-clipboard-text\":_vm.accountAddressValue,\"title\":_vm.$t('message.c143')},on:{\"click\":_vm.accountCopy}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('message.destinationAddress')+'：',\"prop\":\"joinAddress\"}},[_c('el-input',{ref:\"joinAddress\",attrs:{\"type\":\"text\"},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.joinAddress),callback:function ($$v) {_vm.$set(_vm.transferForm, \"joinAddress\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"transferForm.joinAddress\"}}),_vm._v(\" \"),_c('i',{staticClass:\"cursor-p icons\",on:{\"click\":_vm.toUsersAddressList}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('message.transferAmount')+'：',\"prop\":\"joinNo\"}},[_c('span',{staticClass:\"allUsable\"},[_vm._v(_vm._s(_vm.$t('message.currentBalance'))+\": \"+_vm._s(_vm.usable)+\" NULS\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":17},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.joinNo),callback:function ($$v) {_vm.$set(_vm.transferForm, \"joinNo\", $$v)},expression:\"transferForm.joinNo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('message.remarks')+'：'}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"maxlength\":30},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.remark),callback:function ($$v) {_vm.$set(_vm.transferForm, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"transferForm.remark\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('message.c28')+': '+this.fee+' NULS'}}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"transfer-submit\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"id\":\"transferSubmit\"},on:{\"click\":function($event){_vm.transferSubmit('transferForm')}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('message.c114'))+\"\\n        \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"transfer-dialog\",attrs:{\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-table',{attrs:{\"data\":_vm.userAddressList},on:{\"row-dblclick\":_vm.dbcheckedAddress}},[_c('el-table-column',{attrs:{\"property\":\"userAddress\",\"label\":_vm.$t('message.tabName'),\"min-width\":\"280\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"userAlias\",\"label\":_vm.$t('message.tabAlias'),\"width\":\"70\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"userHelp\",\"label\":_vm.$t('message.remarks'),\"width\":\"110\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":_vm.$t('message.operation'),\"width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"cursor-p text-d\",on:{\"click\":function($event){_vm.checkedAddress(scope.row.userAddress)}}},[_vm._v(_vm._s(_vm.$t('message.select')))])]}}])})],1)],1),_vm._v(\" \"),_c('Password',{ref:\"password\",attrs:{\"submitId\":_vm.submitId},on:{\"toSubmit\":_vm.toSubmit}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-089894ed\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/wallet/Transfer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-089894ed\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Transfer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transfer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transfer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-089894ed\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Transfer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/wallet/Transfer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}