{"version":3,"sources":["webpack:///src/pages/wallet/Transfer.vue","webpack:///./src/pages/wallet/Transfer.vue?a261","webpack:///./src/pages/wallet/Transfer.vue"],"names":["Transfer","data","_this2","this","accountAddressValue","localStorage","getItem","submitId","usable","fee","accountAddress","remnant","address","transferForm","outName","joinAddress","joinNo","serviceNo","remark","rules","selectAddress","validator","rule","value","callback","Error","$t","checkPass","$refs","validateField","trigger","exec","setTimeout","values","bignumber","nu","comparedTo","minus","userAddressList","dialogTableVisible","components","Back","BackBar","AccountAddressBar","Password","PasswordBar","mounted","getBalanceAddress","methods","url","_this3","$fetch","then","response","success","leftShift","parseFloat","times","toString","chenckAccountAddress","chenckAddress","setItem","countFee","accountCopy","javaUtil","copy","$message","message","type","duration","allUsable","balance","config","openDB","indexedDB","open","onupgradeneeded","e","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","autoIncrement","toUsersAddressList","checkedAddress","dbcheckedAddress","row","event","userAddress","_this4","rightShift","params","replace","transferSubmit","fromName","_this5","validate","valid","password","showPassword","$confirm","confirmButtonText","cancelButtonText","toSubmit","catch","_this6","param","$post","sessionStorage","$router","push","name","msg","wallet_Transfer","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","backTitle","_v","_s","ref","model","label","on","data-clipboard-text","title","click","prop","change","$$v","$set","trim","expression","maxlength","id","$event","visible","update:visible","row-dblclick","property","min-width","align","width","scopedSlots","_u","key","fn","scope","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.d8db98006591642585a3.js","sourcesContent":["<template>\n    <div class=\"transfer\">\n        <Back :backTitle=\"this.$t('message.walletManagement')\"></Back>\n        <div class=\"transfer-info\">\n            <h2>{{$t('message.transfer')}}</h2>\n            <el-form :model=\"transferForm\" :rules=\"rules\" ref=\"transferForm\">\n                <el-form-item :label=\"$t('message.sourceAddress')+'：'\" class=\"out-address\">\n                    <AccountAddressBar @chenckAccountAddress=\"chenckAccountAddress\"></AccountAddressBar>\n                    <i class=\"copy_icon copyBtn cursor-p\" :data-clipboard-text=\"accountAddressValue\"\n                       @click=\"accountCopy\" :title=\"$t('message.c143')\"></i>\n                </el-form-item>\n                <el-form-item :label=\"$t('message.destinationAddress')+'：'\" class=\"join-address\" prop=\"joinAddress\">\n                    <el-input type=\"text\" v-model.trim=\"transferForm.joinAddress\" ref=\"joinAddress\" @change=\"countFee\"></el-input>\n                    <i class=\"cursor-p\" @click=\"toUsersAddressList\"></i>\n                </el-form-item>\n                <el-form-item :label=\"$t('message.transferAmount')+'：'\" class=\"join-nos\" prop=\"joinNo\">\n                    <span class=\"allUsable\">{{$t('message.currentBalance')}}: {{usable}} NULS</span>\n                    <el-input type=\"text\" v-model=\"transferForm.joinNo\" :maxlength=\"17\" @change=\"countFee\"></el-input>\n                   <!-- <span class=\"allNo\" @click=\"allUsable(usable)\">{{$t('message.all')}}</span>-->\n                </el-form-item>\n                <el-form-item :label=\"$t('message.c28')+': '+this.fee+' NULS'\" class=\"service-no\">\n                </el-form-item>\n                <el-form-item :label=\"$t('message.remarks')+'：'\" class=\"remark\">\n                   <el-input type=\"textarea\" v-model.trim=\"transferForm.remark\"\n                              :maxlength=\"30\" @change=\"countFee\"></el-input>\n                   <!-- <el-input type=\"text\" v-model.trim=\"transferForm.remark\":maxlength=\"30\" class=\"remark\"></el-input>-->\n                </el-form-item>\n                <el-form-item class=\"transfer-submit\">\n                    <el-button type=\"primary\" @click=\"transferSubmit('transferForm')\" id=\"transferSubmit\">\n                        {{$t('message.c114')}}\n                    </el-button>\n                </el-form-item>\n            </el-form>\n            <el-dialog :visible.sync=\"dialogTableVisible\" class=\"transfer-dialog\">\n                <el-table :data=\"userAddressList\" @row-dblclick=\"dbcheckedAddress\">\n                    <el-table-column property=\"userAddress\" :label=\"$t('message.tabName')\" min-width=\"280\"\n                                     align='center'></el-table-column>\n                    <!--<el-table-column property=\"userAlias\" :label=\"$t('message.tabAlias')\" width=\"70\"\n                                     align='center'></el-table-column>-->\n                    <el-table-column property=\"userHelp\" :label=\"$t('message.remarks')\" width=\"110\"\n                                     align='center'></el-table-column>\n                    <el-table-column :label=\"$t('message.operation')\" width=\"100\" align='center'>\n                        <template slot-scope=\"scope\">\n                            <span class=\"cursor-p text-d\" @click=\"checkedAddress(scope.row.userAddress)\" >{{$t('message.select')}}</span>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </el-dialog>\n            <Password ref=\"password\" @toSubmit=\"toSubmit\" :submitId=\"submitId\"></Password>\n\n        </div>\n    </div>\n</template>\n<script>\n  import Back from '@/components/BackBar.vue'\n  import AccountAddressBar from '@/components/AccountAddressBar.vue'\n  import Password from '@/components/PasswordBar.vue'\n  import copy from 'copy-to-clipboard'\n  import * as config from '@/config.js'\n  import {BigNumber} from 'bignumber.js'\n\n  export default {\n    data() {\n      let selectAddress = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error(this.$t('message.addressNull')))\n        } else {\n          if (this.transferForm.checkPass !== '') {\n            this.$refs.transferForm.validateField('joinNo')\n          }\n          callback()\n        }\n      };\n      let checkJoinAddress = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('message.transferNull')))\n        } else {\n          this.address = localStorage.getItem('newAccountAddress');\n          let re = /^[\\u4e00-\\u9fa5_a-zA-Z0-9]+$/;\n          if (!re.exec(value)) {\n            callback(new Error(this.$t('message.c168')))\n          } else if (value === this.address) {\n            callback(new Error(this.$t('message.addressOrTransfer')))\n          } else {\n            callback()\n          }\n        }\n      };\n      let checkJoinNo = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('message.transferNO')))\n        }\n        setTimeout(() => {\n          //console.log(value);\n          let re = /(^\\+?|^\\d?)\\d*\\.?\\d+$/;\n          let res = /^\\d{1,8}(\\.\\d{1,8})?$/;\n          if (!re.exec(value)) {\n            callback(new Error(this.$t('message.transferNO1')))\n          } else {\n            let values = new BigNumber(value);\n            let nu = new BigNumber(this.usable);\n            if (values.comparedTo(nu.minus(0.01)) === 1) {\n              callback(new Error(this.$t('message.transferNO2')))\n            } else if (value < 0.01) {\n              callback(new Error(this.$t('message.transferNO3')))\n            } else if (!res.exec(value)) {\n              callback(new Error(this.$t('message.c136')))\n            } else {\n              callback()\n            }\n          }\n        }, 100)\n\n      };\n      return {\n        accountAddressValue: localStorage.getItem('newAccountAddress'),\n        submitId: 'transferSubmit',\n        usable: 0,\n        fee:0.00,\n        accountAddress: [],\n        remnant: 0,\n        address: localStorage.getItem('newAccountAddress'),\n        transferForm: {\n          address: localStorage.getItem('newAccountAddress'),\n          outName: '',\n          joinAddress: '',\n          joinNo: '',\n          serviceNo: '',\n          remark: ''\n        },\n        rules: {\n          selectAddress: [\n            {validator: selectAddress, trigger: 'blur'}\n          ],\n          joinAddress: [\n            {validator: checkJoinAddress, trigger: 'blur'}\n          ],\n          joinNo: [\n            {validator: checkJoinNo, trigger: 'blur'}\n          ]\n        },\n        userAddressList: [],\n        dialogTableVisible: false,\n      }\n    },\n    components: {\n      Back,\n      AccountAddressBar,\n      Password,\n    },\n    mounted() {\n      let _this = this;\n      //this.openDB();\n      if(this.address ===''){\n        this.address = localStorage.getItem('newAccountAddress')\n      }\n      this.getBalanceAddress('/account/balance/' + this.address)\n    },\n    methods: {\n      /**\n       *根据账户地址获取账户余额\n       * Get the balance of the account according to the account address\n       * @param url\n       */\n      getBalanceAddress(url) {\n        this.$fetch(url)\n          .then((response) => {\n            //console.log(response)\n            if (response.success) {\n              let leftShift = new BigNumber(0.00000001);\n              this.usable = parseFloat(leftShift.times(response.data.usable).toString())\n            }\n          })\n      },\n\n      /**\n       * 获取下拉选择地址\n       *Get the drop-down selection address\n       * @param chenckAddress\n       */\n      chenckAccountAddress(chenckAddress) {\n        this.address = chenckAddress;\n        this.accountAddressValue = chenckAddress;\n        localStorage.setItem('newAccountAddress', this.address);\n        this.getBalanceAddress('/account/balance/' + chenckAddress);\n        this.$refs.transferForm.validateField('joinAddress');\n        this.$refs.transferForm.validateField('joinNo');\n        this.countFee();\n      },\n\n      /**\n       * 复制功能\n       * copy\n       */\n      accountCopy() {\n        javaUtil.copy(this.accountAddressValue);\n        //copy(this.accountAddressValue)\n        this.$message({\n          message: this.$t('message.c129'), type: 'success', duration: '800'\n        })\n      },\n\n      /**\n       * 选择全部金额\n       * Choose the total amount\n       * @param balance\n       */\n      allUsable(balance) {\n        if (balance === 0) {\n          this.$message({\n            message: this.$t('message.creditLow'),\n            type: 'warning '\n          })\n        } else {\n          this.transferForm.joinNo = config.FloatSub(balance, 0.01);\n          this.$refs.transferForm.validateField('joinAddress');\n          this.$refs.transferForm.validateField('joinNo')\n        }\n      },\n\n      /**\n       * 创建usersDB\n       * New usersDB\n       */\n      openDB() {\n        let request = indexedDB.open('usersDB', 1)\n        request.onupgradeneeded = function (e) {\n          let db = e.target.result\n          // 如果不存在Users对象仓库则创建\n          if (!db.objectStoreNames.contains('usersDB')) {\n            let store = db.createObjectStore('addressList', {keyPath: 'userAddress', autoIncrement: false})\n          }\n        }\n      },\n\n      /**\n       * 选择通讯录\n       * Select the address book\n       */\n      toUsersAddressList() {\n        this.$message({\n          type: 'info', message: this.$t('message.c65'), duration: '800'\n        })\n       /* this.dialogTableVisible = true;\n        let request = indexedDB.open('usersDB', 1);\n        let dbData = [];\n        request.onsuccess = function (event) {\n          let db = event.target.result;\n          let tx = db.transaction('addressList', 'readonly');\n          let store = tx.objectStore('addressList');\n          // 打开游标，遍历customers中所有数据\n          store.openCursor().onsuccess = function (event) {\n            let cursor = event.target.result;\n            if (cursor) {\n              dbData.push(cursor.value);\n              cursor.continue()\n            }\n          }\n        };\n        this.userAddressList = dbData*/\n      },\n\n      /**\n       * 选中通讯录地址\n       *Address the address of the address book\n       * @param address\n       */\n      checkedAddress(address) {\n        this.transferForm.joinAddress = address\n        this.dialogTableVisible = false\n      },\n\n      /**\n       * 双击选择通讯录地址\n       *Double click the address book address\n       * @param row\n       * @param event\n       */\n      dbcheckedAddress(row, event) {\n        this.transferForm.joinAddress = row.userAddress\n        this.dialogTableVisible = false\n      },\n\n      /**\n       *计算手续费\n       *Calculation fee\n       **/\n      countFee(){\n        //console.log(\"feeOk=\"+this.transferForm.joinAddress !=='' && this.transferForm.joinNo > 0);\n        if(this.transferForm.joinAddress !=='' && this.transferForm.joinNo > 0){\n          let rightShift = new BigNumber(100000000);\n          let params = \"address=\"+ this.address\n            + \"&toAddress=\"+ this.transferForm.joinAddress\n            + \"&amount=\" + rightShift.times(this.transferForm.joinNo)\n            + \"&remark=\" + this.transferForm.remark.replace(/\\n/g,\"\");\n          this.$fetch('/accountledger/transfer/fee?'+ params)\n            .then((response) => {\n              //console.log(response);\n              if (response.success) {\n                let leftShift = new BigNumber(0.00000001);\n                this.fee = leftShift.times(response.data.value);\n              }\n            });\n        }\n      },\n\n      /**\n       * 确认转账\n       * Confirmation of transfer\n       * @param fromName\n       */\n      transferSubmit(fromName) {\n        this.$refs[fromName].validate((valid) => {\n          if (valid) {\n            if (localStorage.getItem('encrypted') === \"true\") {\n              this.$refs.password.showPassword(true)\n            } else {\n              this.$confirm(this.$t('message.c172'), '', {\n                confirmButtonText: this.$t('message.confirmButtonText'),\n                cancelButtonText: this.$t('message.cancelButtonText'),\n              }).then(() => {\n                this.toSubmit('')\n              }).catch(() => {\n\n              })\n            }\n          } else {\n            return false\n          }\n        })\n      },\n\n      /**\n       * 输入密码确定交易\n       *Enter the password to determine the transaction\n       * @param password\n       */\n      toSubmit(password) {\n        let rightShift = new BigNumber(100000000);\n        let param = '{\"address\":\"' + this.address\n          + '\",\"toAddress\":\"' + this.transferForm.joinAddress\n          + '\",\"amount\":' + rightShift.times(this.transferForm.joinNo)\n          + ',\"password\":\"' + password\n          + '\",\"remark\":\"' + this.transferForm.remark.replace(/\\n/g,\"\") + '\"}';\n        //console.log(\"param======\" + param)\n        this.$post('/accountledger/transfer', param)\n          .then((response) => {\n            //console.log(\"param=\" + param)\n            //console.log(response)\n            if (response.success) {\n              this.$message({\n                message: this.$t('message.passWordSuccess'),\n                type: 'success'\n              });\n              this.transferForm.joinAddress = '';\n              this.transferForm.joinNo = '';\n              this.transferForm.remark = '';\n              this.getBalanceAddress('/account/balance/' + this.transferForm.address);\n              sessionStorage.setItem('walletActiveName', 'second')\n              this.$router.push({\n                name: '/wallet',\n              })\n            } else {\n              this.$message({\n                message: this.$t('message.passWordFailed') + response.msg,\n                type: 'warning',\n              })\n            }\n          })\n      },\n    }\n  }\n</script>\n\n<style lang=\"less\">\n    @import url(\"../../assets/css/style.less\");\n\n    .transfer {\n        width: 100%;\n        margin: auto;\n        .transfer-info {\n            width: 70%;\n            margin: auto;\n            .joinNo {\n                .el-input__inner {\n                    /* background-color: #17202e;*/\n                    //border: 1px solid #24426c;\n                }\n            }\n            .out-name {\n                font-size: 14px;\n                color: #606266;\n            }\n            .out-name,\n            .service-no {\n                label {\n                    float: left;\n                    padding-right: 0.5rem;\n                }\n            }\n            .out-address {\n                .address-select {\n                    width: 553px;\n                    right: 0;\n                    margin-left: 0;\n                    .sub-select-item {\n                        width: 553px;\n                    }\n                }\n                .copy_icon {\n                    position: absolute;\n                    top: 23px;\n                    right: -33px;\n                    width: 30px;\n                    height: 20px;\n                    display: block;\n                    float: left;\n                    background-size: @bg-size;\n                    background: @bg-image -198px -46px;\n                }\n            }\n            .join-address {\n                i {\n                    width: 25px;\n                    height: 25px;\n                    background-size: @bg-size;\n                    background: @bg-image -54px -74px;\n                    position: relative;\n                    z-index: 8;\n                    float: right;\n                    margin-top: -27px;\n                    margin-right: 0;\n                }\n            }\n            .remark {\n                .el-textarea__inner {\n                    background-color: #17202e;\n                    padding: 0 2px;\n                    color: #FFFFFF;\n                }\n            }\n            h2 {\n                text-align: center;\n                padding: 20px 0 20px;\n            }\n            .transfer-submit {\n                text-align: center;\n                button {\n                    width: 30%;\n                }\n            }\n            .el-form {\n                .el-form-item {\n                    margin-bottom: 0;\n                    height: 70px;\n                    .el-form-item__label {\n                        line-height: 0;\n                        height: 20px;\n                        color: #FFFFFF;\n                    }\n                    .el-form-item__content {\n                        line-height: 0;\n                        .el-input {\n                            input {\n                                font-size: 12px;\n                            }\n                        }\n                        .el-input__inner {\n                            /*border: 1px solid #24426c;*/\n                            color: #FFFFFF;\n                            &:hover {\n                                border-color: #658ec7;\n                            }\n                        }\n                        .el-form-item__error {\n                            padding-top: 0;\n                        }\n                    }\n                }\n                .service-no {\n                    height: 30px;\n                    margin-top: -3px;\n                }\n                .transfer-submit {\n                    .el-form-item__content {\n                        margin-top: 20px;\n                    }\n\n                }\n            }\n            .transfer-dialog {\n                .el-dialog__body {\n                    .el-table {\n                        max-height: 332px;\n                        overflow-y: auto;\n                        overflow-x: hidden;\n                        &::-webkit-scrollbar-track {\n                            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);\n                            background-color: #0c1323;\n                            border-radius: 10px;\n                        }\n                        &::-webkit-scrollbar {\n                            width: 3px;\n                            background-color: #0c1323;\n                        }\n                        &::-webkit-scrollbar-thumb {\n                            border-radius: 10px;\n                            background-image: -webkit-gradient(linear, 40% 0%, 75% 84%, from(#222d3f), to(#82bd39), color-stop(.6, #222d3f))\n                        }\n                        .el-table__body-wrapper {\n                            overflow-x: hidden;\n                        }\n                    }\n                }\n            }\n            .el-dialog__wrapper {\n                .el-dialog {\n                    width: 70%;\n                }\n            }\n            .password-dialog {\n                .el-dialog {\n                    width: 50%;\n                }\n            }\n        }\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/wallet/Transfer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"transfer\"},[_c('Back',{attrs:{\"backTitle\":this.$t('message.walletManagement')}}),_vm._v(\" \"),_c('div',{staticClass:\"transfer-info\"},[_c('h2',[_vm._v(_vm._s(_vm.$t('message.transfer')))]),_vm._v(\" \"),_c('el-form',{ref:\"transferForm\",attrs:{\"model\":_vm.transferForm,\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"out-address\",attrs:{\"label\":_vm.$t('message.sourceAddress')+'：'}},[_c('AccountAddressBar',{on:{\"chenckAccountAddress\":_vm.chenckAccountAddress}}),_vm._v(\" \"),_c('i',{staticClass:\"copy_icon copyBtn cursor-p\",attrs:{\"data-clipboard-text\":_vm.accountAddressValue,\"title\":_vm.$t('message.c143')},on:{\"click\":_vm.accountCopy}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"join-address\",attrs:{\"label\":_vm.$t('message.destinationAddress')+'：',\"prop\":\"joinAddress\"}},[_c('el-input',{ref:\"joinAddress\",attrs:{\"type\":\"text\"},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.joinAddress),callback:function ($$v) {_vm.$set(_vm.transferForm, \"joinAddress\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"transferForm.joinAddress\"}}),_vm._v(\" \"),_c('i',{staticClass:\"cursor-p\",on:{\"click\":_vm.toUsersAddressList}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"join-nos\",attrs:{\"label\":_vm.$t('message.transferAmount')+'：',\"prop\":\"joinNo\"}},[_c('span',{staticClass:\"allUsable\"},[_vm._v(_vm._s(_vm.$t('message.currentBalance'))+\": \"+_vm._s(_vm.usable)+\" NULS\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":17},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.joinNo),callback:function ($$v) {_vm.$set(_vm.transferForm, \"joinNo\", $$v)},expression:\"transferForm.joinNo\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"service-no\",attrs:{\"label\":_vm.$t('message.c28')+': '+this.fee+' NULS'}}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"remark\",attrs:{\"label\":_vm.$t('message.remarks')+'：'}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"maxlength\":30},on:{\"change\":_vm.countFee},model:{value:(_vm.transferForm.remark),callback:function ($$v) {_vm.$set(_vm.transferForm, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"transferForm.remark\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"transfer-submit\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"id\":\"transferSubmit\"},on:{\"click\":function($event){_vm.transferSubmit('transferForm')}}},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('message.c114'))+\"\\n                \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"transfer-dialog\",attrs:{\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-table',{attrs:{\"data\":_vm.userAddressList},on:{\"row-dblclick\":_vm.dbcheckedAddress}},[_c('el-table-column',{attrs:{\"property\":\"userAddress\",\"label\":_vm.$t('message.tabName'),\"min-width\":\"280\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"userHelp\",\"label\":_vm.$t('message.remarks'),\"width\":\"110\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":_vm.$t('message.operation'),\"width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"cursor-p text-d\",on:{\"click\":function($event){_vm.checkedAddress(scope.row.userAddress)}}},[_vm._v(_vm._s(_vm.$t('message.select')))])]}}])})],1)],1),_vm._v(\" \"),_c('Password',{ref:\"password\",attrs:{\"submitId\":_vm.submitId},on:{\"toSubmit\":_vm.toSubmit}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-238b85f2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/wallet/Transfer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-238b85f2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Transfer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transfer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Transfer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-238b85f2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Transfer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/wallet/Transfer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}