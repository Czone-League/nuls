{"version":3,"sources":["webpack:///src/pages/wallet/ImportNuls.vue","webpack:///./src/pages/wallet/ImportNuls.vue?5162","webpack:///./src/pages/wallet/ImportNuls.vue"],"names":["__webpack_exports__","data","imageUrl","keyStorePath","keyStoreInfo","components","Back","__WEBPACK_IMPORTED_MODULE_0__components_BackBar_vue__","Password","__WEBPACK_IMPORTED_MODULE_1__components_PasswordBar_vue__","methods","beforeAvatarUpload","file","isType","name","substr","length","isLt2M","size","this","path","$message","error","keySubmit","formName","_this","$refs","validate","valid","console","log","password","showPassword","keyStoreSubmit","toSubmit","fs","__webpack_require__","dataInfo","readFileSync","param","accountKeyStoreDto","eval","postKeyStore","url","params","_this2","$post","then","response","success","localStorage","setItem","getItem","getAccountList","$router","push","type","message","$t","msg","_this3","$fetch","$store","commit","list","wallet_ImportNuls","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","backTitle","_v","_s","action","show-file-list","limit","before-upload","src","slot","id","on","click","ref","submitId","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","ImportNuls"],"mappings":"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","file":"static/js/6.85ff79abdda2138b764f.js","sourcesContent":["<template>\r\n    <div class=\"import-nuls\">\r\n        <Back :backTitle=\"this.$t('message.inportAccount')\"></Back>\r\n        <h2>{{$t(\"message.c146\")}}</h2>\r\n        <el-upload\r\n                class=\"avatar-uploader\"\r\n                action=\"http://192.168.1.201:8001/posts/\"\r\n                :show-file-list=\"true\"\r\n                :limit=\"1\"\r\n                :before-upload=\"beforeAvatarUpload\">\r\n            <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            <div slot=\"tip\" class=\"el-upload__tip\">{{$t(\"message.c147\")}}</div>\r\n        </el-upload>\r\n        <el-button type=\"primary\" @click=\"keyStoreSubmit\" id=\"importKeystore\">\r\n            {{$t('message.confirmButtonText')}}\r\n        </el-button>\r\n        <Password ref=\"password\" @toSubmit=\"toSubmit\" :submitId=\"submitId\"></Password>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import Back from '@/components/BackBar.vue'\r\n  import Password from '@/components/PasswordBar.vue'\r\n\r\n  export default {\r\n    data () {\r\n      return {\r\n        imageUrl: '',\r\n        keyStorePath: '',\r\n        keyStoreInfo: '',\r\n      }\r\n    },\r\n    components: {\r\n      Back,\r\n      Password,\r\n    },\r\n    methods: {\r\n      //验证文件格式和大小  Verify file format and size\r\n      beforeAvatarUpload (file) {\r\n        const isType = file.name.substr(file.name.length - 8) === 'keystore'\r\n        const isLt2M = file.size / 1024 / 1024 < 2\r\n        if (!isType) {\r\n          this.$message.error('上传只能是 keystore 格式文件!')\r\n        } else if (!isLt2M) {\r\n          this.$message.error('上传头像图片大小不能超过 2MB!')\r\n        } else {\r\n          this.keyStorePath = file.path\r\n        }\r\n        return isType && isLt2M\r\n      },\r\n\r\n      //提交导入明文私钥\r\n      keySubmit (formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$refs.password.showPassword(true)\r\n          } else {\r\n            console.log('error submit!!')\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      //确定导入 Determine the import\r\n\r\n      keyStoreSubmit () {\r\n        if (this.keyStorePath !== '') {\r\n          this.$refs.password.showPassword(true)\r\n        } else {\r\n          this.$message.error('message.passWordFailed')\r\n        }\r\n      },\r\n\r\n      //输入密码后提交\r\n      toSubmit (password) {\r\n        let fs = require('fs')\r\n        let dataInfo = fs.readFileSync(this.keyStorePath, 'utf-8')\r\n        let param = {\r\n          accountKeyStoreDto: eval('(' + dataInfo + ')'),\r\n          password: password,\r\n        }\r\n        this.postKeyStore('/account/import', param)\r\n      },\r\n\r\n      //导入keyStore import keyStore\r\n      postKeyStore (url, params) {\r\n        //console.log('url=' + url)\r\n        //console.log('params=' + params)\r\n        this.$post(url, params)\r\n          .then((response) => {\r\n            console.log(response)\r\n            if (response.success) {\r\n              localStorage.setItem('newAccountAddress', response.data)\r\n              if (localStorage.getItem('toUserInfo') !== '1') {\r\n                this.getAccountList('/account')\r\n                this.$router.push({\r\n                  name: '/wallet'\r\n                })\r\n              } else {\r\n                this.$router.push({\r\n                  path: '/wallet/users/userInfo'\r\n                })\r\n              }\r\n              this.$message({\r\n                type: 'success', message: this.$t('message.passWordSuccess')\r\n              })\r\n            } else {\r\n              this.$message({\r\n                type: 'warning', message: this.$t('message.passWordFailed') + response.msg\r\n              })\r\n            }\r\n          })\r\n      },\r\n      //获取账户地址列表\r\n      getAccountList (url) {\r\n        this.$fetch(url)\r\n          .then((response) => {\r\n            if (response.success) {\r\n              this.$store.commit('setAddressList', response.data.list)\r\n            }\r\n          })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .import-nuls {\r\n        width: 90%;\r\n        margin: auto;\r\n        text-align: center;\r\n        h2 {\r\n            text-align: center;\r\n            line-height: 3rem;\r\n        }\r\n        .avatar-uploader {\r\n            text-align: center;\r\n            margin-top: 3rem;\r\n            .el-upload {\r\n                border: 1px dashed #d9d9d9;\r\n                border-radius: 6px;\r\n                cursor: pointer;\r\n                position: relative;\r\n                overflow: hidden;\r\n            }\r\n            .avatar-uploader .el-upload:hover {\r\n                border-color: #409EFF;\r\n            }\r\n            .avatar-uploader-icon {\r\n                font-size: 28px;\r\n                color: #8c939d;\r\n                width: 178px;\r\n                height: 178px;\r\n                line-height: 178px;\r\n                text-align: center;\r\n            }\r\n            .avatar {\r\n                width: 178px;\r\n                height: 178px;\r\n                display: block;\r\n            }\r\n        }\r\n\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/wallet/ImportNuls.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"import-nuls\"},[_c('Back',{attrs:{\"backTitle\":this.$t('message.inportAccount')}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.$t(\"message.c146\")))]),_vm._v(\" \"),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://192.168.1.201:8001/posts/\",\"show-file-list\":true,\"limit\":1,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(_vm._s(_vm.$t(\"message.c147\")))])]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"id\":\"importKeystore\"},on:{\"click\":_vm.keyStoreSubmit}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('message.confirmButtonText'))+\"\\n    \")]),_vm._v(\" \"),_c('Password',{ref:\"password\",attrs:{\"submitId\":_vm.submitId},on:{\"toSubmit\":_vm.toSubmit}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-44e7cea2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/wallet/ImportNuls.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44e7cea2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImportNuls.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImportNuls.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImportNuls.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44e7cea2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImportNuls.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/wallet/ImportNuls.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}