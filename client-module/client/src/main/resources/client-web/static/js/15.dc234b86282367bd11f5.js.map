{"version":3,"sources":["webpack:///src/pages/consensus/NodePage.vue","webpack:///./src/pages/consensus/NodePage.vue?1db0","webpack:///./src/pages/consensus/NodePage.vue"],"names":["NodePage","data","_this","this","loading","btOk","$store","getters","getNetWorkInfo","localBestHeight","netBestHeight","submitId","address","$route","params","agentId","nodeData","usable","fee","nodeForm","nodeNo","nodeRules","validator","rule","value","callback","Error","$t","setTimeout","exec","values","bignumber","nu","comparedTo","minus","trigger","toCheckOk","components","Back","BackBar","ProgressBar","AccountAddressBar","Password","PasswordBar","created","getConsensusAddress","getBalanceAddress","localStorage","getItem","mounted","$refs","focus","sessionStorage","setItem","methods","url","_this2","$fetch","then","response","success","leftShift","agentAddress","deposit","parseFloat","times","toString","creditVals","creditVal","toFixed","agentAddresss","substr","totalDeposits","totalDeposit","txHash","chenckAccountAddress","chenckAddress","validateField","_this3","allUsable","balance","$message","message","type","config","toCheck","$router","push","name","countFee","_this4","rightShift","onSubmit","formName","_this5","validate","valid","password","showPassword","$confirm","confirmButtonText","cancelButtonText","toSubmit","catch","duration","_this6","param","$post","activeName","msg","consensus_NodePage","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","backTitle","_v","_s","agentName","directives","rawName","expression","class","status","on","click","$event","commissionRate","memberCount","colorData","widthData","ref","model","rules","size","label-position","nativeOn","submit","preventDefault","label","prop","maxlength","change","$$v","$set","id","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.dc234b86282367bd11f5.js","sourcesContent":["<template>\n  <div class=\"node-page\">\n    <Back :backTitle=\"this.$t('message.consensusManagement')\"></Back>\n    <h2>{{this.nodeData.agentName}}</h2>\n    <div class=\"div-icon1 node-page-top\" v-loading=\"loading\">\n      <p class=\"subscript\" :class=\"this.nodeData.status === 0  ? 'stay' : ''\">\n        {{ $t('message.status'+this.nodeData.status) }}\n      </p>\n      <ul>\n        <li class=\"li-bg overflow\">\n          <label>{{$t('message.c16')}}：</label>{{this.nodeData.agentAddresss}}\n          <span v-show=\"toCheckOk\" @click=\"toCheck()\" class=\"cursor-p text-d\">{{$t('message.c5_1')}}</span>\n        </li>\n        <li>\n          <label>{{$t('message.c17')}}：</label>{{this.nodeData.commissionRate}}%\n        </li>\n        <li>\n          <label>{{$t('message.c25')}}：</label>{{this.nodeData.deposit}} NULS\n        </li>\n        <li>\n          <label>{{$t('message.c19')}}：</label>{{this.nodeData.memberCount}}\n        </li>\n        <li>\n          <label>{{$t('message.c18')}}：</label>\n          <ProgressBar :colorData=\"this.nodeData.creditVals < 0 ? '#f64b3e':'#82bd39'\"\n                       :widthData=\"this.nodeData.creditVal\"></ProgressBar>\n          <span>&nbsp;{{this.nodeData.creditVals}}</span>\n        </li>\n        <li>\n          <label>{{$t('message.c64')}}：</label>\n          <ProgressBar colorData=\"#58a5c9\" :widthData=\"this.nodeData.totalDeposit\"></ProgressBar>\n          <span>&nbsp;{{this.nodeData.totalDeposits}}</span>\n        </li>\n        <!-- <li class=\"li-info overflow\">\n             <label>{{$t('message.c27')}}：</label>{{this.nodeData.introduction}}\n         </li>-->\n      </ul>\n    </div>\n    <div class=\"node-page-bottom\">\n      <el-form ref=\"nodeForm\" :model=\"nodeForm\" :rules=\"nodeRules\" size=\"mini\" label-position=\"left\"\n               @submit.native.prevent>\n        <el-form-item :label=\"$t('message.newAccountAddress')\" class=\"account-address\">\n          <AccountAddressBar @chenckAccountAddress=\"chenckAccountAddress\"></AccountAddressBar>\n        </el-form-item>\n        <span class=\"allUsable\">{{$t('message.currentBalance')}}: {{this.usable.toFixed(8) }} NULS</span>\n        <el-form-item :label=\"$t('message.c25')\" class=\"number\" prop=\"nodeNo\">\n          <el-input ref=\"input\" v-model=\"nodeForm.nodeNo\" :maxlength=\"17\" @change=\"countFee\"></el-input>\n         <!-- <span class=\"allNo\" @click=\"allUsable(usable)\">{{$t('message.all')}}</span>-->\n        </el-form-item>\n       <!-- <div class=\"procedure\"><label>{{$t('message.c28')}}</label><span>{{this.fee}} NULS</span></div>-->\n        <el-form-item :label=\"$t('message.c28')+' '+this.fee+' NULS'\" class=\"procedure\">\n        </el-form-item>\n\n        <el-form-item size=\"large\" class=\"submit\">\n          <el-button type=\"primary\" @click=\"onSubmit('nodeForm')\" id=\"nodePage\" :disabled=this.btOk>\n            {{$t('message.confirmButtonText')}}\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <Password ref=\"password\" @toSubmit=\"toSubmit\" :submitId=\"submitId\"></Password>\n  </div>\n</template>\n\n<script>\n  import Back from '@/components/BackBar.vue'\n  import ProgressBar from '@/components/ProgressBar.vue'\n  import AccountAddressBar from '@/components/AccountAddressBar.vue'\n  import Password from '@/components/PasswordBar.vue'\n  import * as config from '@/config.js'\n  import {BigNumber} from 'bignumber.js'\n\n  export default {\n    data() {\n      let checkNodeNo = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('message.c52')))\n        }\n        setTimeout(() => {\n          let re = /^\\d+(?=\\.{0,1}\\d+$|$)/;\n          let res = /^\\d{1,8}(\\.\\d{1,8})?$/;\n\n          if (!re.exec(value) || !res.exec(value)) {\n            callback(new Error(this.$t('message.c53')))\n          } else {\n            let values = new BigNumber(value);\n            let nu = new BigNumber(this.usable);\n            if (value < 2000) {\n              callback(new Error(this.$t('message.c54')))\n            } else if (values.comparedTo(nu.minus(0.01)) === 1) {\n              callback(new Error(this.$t('message.c542')))\n            } else {\n              callback()\n            }\n          }\n        }, 100)\n      };\n      return {\n        loading: true,\n        btOk: this.$store.getters.getNetWorkInfo.localBestHeight !== this.$store.getters.getNetWorkInfo.netBestHeight,\n        submitId: 'nodePage',\n        address: this.$route.params.address,\n        agentId: '',\n        nodeData: [],\n        usable: 0,\n        fee: 0.00,\n        nodeForm: {\n          nodeNo: '',\n        },\n        nodeRules: {\n          nodeNo: [\n            {validator: checkNodeNo, trigger: 'blur'}\n          ],\n        },\n        toCheckOk: false,\n      }\n    },\n    components: {\n      Back,\n      ProgressBar,\n      AccountAddressBar,\n      Password,\n    },\n    created() {\n      this.getConsensusAddress('/consensus/agent/' + this.address);\n      this.getBalanceAddress('/account/balance/' + localStorage.getItem('newAccountAddress'))\n    },\n    mounted() {\n      this.$refs['input'].focus();\n      this.$refs['input'].value = '';\n      sessionStorage.setItem('passwordOk', '0')\n    },\n    methods: {\n      //根据address获取共识节点列表信息\n      getConsensusAddress(url) {\n        this.$fetch(url)\n          .then((response) => {\n            if (response.success) {\n              //console.log(response);\n              let leftShift = new BigNumber(0.00000001);\n              this.toCheckOk = response.data.agentAddress === localStorage.getItem('newAccountAddress');\n              response.data.deposit = parseFloat(leftShift.times(response.data.deposit).toString());\n              response.data.creditVals = response.data.creditVal;\n              response.data.creditVal = (((((response.data.creditVal + 1) / 2)) * 100).toFixed()).toString() + '%';\n              response.data.agentAddresss = (response.data.agentAddress).substr(0, 10) + '...' + (response.data.agentAddress).substr(-10);\n              response.data.totalDeposits = (response.data.totalDeposit * 0.00000001).toFixed(0) + '/500000';\n              if (response.data.totalDeposit > 50000000000000) {\n                response.data.totalDeposit = '100%'\n              } else {\n                response.data.totalDeposit = (response.data.totalDeposit / 500000000000).toString() + '%'\n              }\n              //response.data.totalDeposit = ((response.data.totalDeposit*0.00000001) / 5000).toFixed(2) + '%';\n              this.agentId = response.data.txHash;\n              this.nodeData = response.data;\n              this.loading = false\n            }\n          })\n      },\n      //获取下拉选择地址\n      chenckAccountAddress(chenckAddress) {\n        //console.log(chenckAddress);\n        this.getBalanceAddress('/account/balance/' + chenckAddress);\n        this.$refs.nodeForm.validateField('nodeNo')\n      },\n      //根据账户地址获取账户余额\n      getBalanceAddress(url) {\n        this.$fetch(url)\n          .then((response) => {\n            if (response.success) {\n              let leftShift = new BigNumber(0.00000001);\n              this.usable = parseFloat(leftShift.times(response.data.usable).toString())\n            }\n          })\n      },\n      //选择全部金额\n      allUsable(balance) {\n        if (balance === 0) {\n          this.$message({\n            message: this.$t('message.creditLow'),\n            type: 'warning '\n          })\n        } else {\n          //console.log(balance)\n          this.nodeForm.nodeNo = config.FloatSub(balance, 0.01);\n          this.$refs.nodeForm.validateField('nodeNo')\n        }\n      },\n      //查看节点\n      toCheck() {\n        this.$router.push({\n          name: '/nodeInfo',\n          params: {\"txHash\": this.agentId}\n        })\n      },\n\n      /**\n       *计算手续费\n       *Calculation fee\n       **/\n      countFee() {\n        if (this.nodeForm.nodeNo > 0) {\n          let rightShift = new BigNumber(100000000);\n          let params = \"address=\" + localStorage.getItem('newAccountAddress')\n            + \"&agentHash=\" + this.agentId\n            + \"&deposit=\" + rightShift.times(this.nodeForm.nodeNo);\n          //console.log(\"params=\" + params);\n          this.$fetch('/consensus/deposit/fee?'+ params)\n            .then((response) => {\n              //console.log(response);\n              if (response.success) {\n                let leftShift = new BigNumber(0.00000001);\n                this.fee = leftShift.times(response.data.value);\n              }\n            });\n        }\n      },\n      //提交委托\n      onSubmit(formName) {\n        if (this.$store.getters.getNetWorkInfo.localBestHeight === this.$store.getters.getNetWorkInfo.netBestHeight\n          && sessionStorage.getItem('setNodeNumberOk') === 'true') {\n          this.$refs[formName].validate((valid) => {\n            if (valid) {\n              if (localStorage.getItem('encrypted') === 'true') {\n                this.$refs.password.showPassword(true)\n              } else {\n                this.$confirm(this.$t('message.c165'), '', {\n                  confirmButtonText: this.$t('message.confirmButtonText'),\n                  cancelButtonText: this.$t('message.cancelButtonText')\n                }).then(() => {\n                  this.toSubmit('')\n                }).catch(() => {\n                })\n              }\n            } else {\n              return false\n            }\n          })\n        } else {\n          this.$message({\n            message: this.$t('message.c133'), duration: '800'\n          })\n        }\n      },\n      //\n      toSubmit(password) {\n        let rightShift = new BigNumber(100000000);\n        let param = '{\"address\":\"' + localStorage.getItem('newAccountAddress')\n          + '\",\"agentHash\":\"' + this.agentId\n          + '\",\"deposit\":\"' + parseFloat(rightShift.times(this.nodeForm.nodeNo).toString())\n          + '\",\"password\":\"' + password + '\"}';\n        //console.log(param);\n        this.$post('/consensus/deposit/', param)\n          .then((response) => {\n            //console.log(response);\n            if (response.success) {\n              this.$message({\n                message: this.$t('message.passWordSuccess'),\n                type: 'success'\n              });\n              this.$router.push({\n                name: '/consensus',\n                params: {'activeName': 'first'}\n              })\n              /*this.$router.push({\n                  name: '/myNode',\n                  params:{\"agentAddress\":this.nodeData.agentAddress}\n              })*/\n            } else {\n              this.$message({\n                message: this.$t('message.passWordFailed') + response.msg,\n                type: 'warning',\n              })\n            }\n          })\n      },\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import url(\"../../assets/css/style.less\");\n\n  .node-page {\n    h2 {\n      font-size: 16px;\n      text-align: center;\n      line-height: 20px;\n      margin-bottom: 28px;\n    }\n    .div-icon {\n      height: 118px;\n      width: 80%;\n      margin: auto;\n      border: 1px solid #658ec7;\n    }\n    ul {\n      width: 100%;\n      height: 105px;\n      margin: auto;\n      font-size: 12px;\n      background-color: #17202e;\n      padding-top: 15px;\n      li {\n        color: #c1c5c9;\n        line-height: 22px;\n        width: 45%;\n        float: left;\n        label {\n          display: block;\n          width: 75px;\n          float: left;\n          padding-left: 25px;\n        }\n        span {\n        }\n      }\n      .li-info {\n        width: 100%;\n        text-align: left;\n      }\n    }\n    .node-page-bottom {\n      width: 80%;\n      height: 190px;\n      margin: 20px auto 0;\n      border: 1px solid #658ec7;\n      background-color: #17202e;\n      .account-address {\n        margin-bottom: 8px;\n        .el-form-item__label {\n          margin-top: 20px;\n          margin-right: 0;\n          text-align: right;\n          width: 67px;\n        }\n        .address-select {\n          right: 90px;\n          top: 20px;\n          margin-left: 90px;\n          .sub-select-list {\n            max-height: 170px;\n            overflow-y: auto;\n            &::-webkit-scrollbar-track {\n              -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);\n              background-color: #0c1323;\n              border-radius: 10px;\n            }\n\n            &::-webkit-scrollbar {\n              width: 3px;\n              background-color: #0c1323;\n            }\n\n            &::-webkit-scrollbar-thumb {\n              border-radius: 10px;\n              background-image: -webkit-gradient(linear, 40% 0%, 75% 84%, from(#FFFFFF), to(#FFFFFF), color-stop(.6, #FFFFFF))\n            }\n\n          }\n        }\n      }\n      .number {\n        .el-form-item__label {\n          margin-top: 15px;\n          width: 68px;\n          text-align: right;\n        }\n      }\n      .el-input__inner {\n        width: 415px;\n        color: #FFFFFF;\n      }\n      .el-form-item {\n        width: 90%;\n        margin: 0 auto 10px;\n        .el-form-item__label {\n          color: #C1C5C9;\n        }\n\n      }\n      .el-input {\n        float: left;\n        width: 415px;\n      }\n      .el-button--primary {\n        margin-top: 0px;\n        margin-right: 60px;\n      }\n      .el-form-item__error {\n        margin-left: 70px;\n      }\n    }\n    .el-form {\n      .allUsable {\n        margin-right: 128px;\n        position: relative;\n      }\n      .allNo {\n        display: block;\n        position: fixed;\n        top: 65.3%;\n        right: 25.8%;\n      }\n    }\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/consensus/NodePage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"node-page\"},[_c('Back',{attrs:{\"backTitle\":this.$t('message.consensusManagement')}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(this.nodeData.agentName))]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"div-icon1 node-page-top\"},[_c('p',{staticClass:\"subscript\",class:this.nodeData.status === 0  ? 'stay' : ''},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('message.status'+this.nodeData.status))+\"\\n    \")]),_vm._v(\" \"),_c('ul',[_c('li',{staticClass:\"li-bg overflow\"},[_c('label',[_vm._v(_vm._s(_vm.$t('message.c16'))+\"：\")]),_vm._v(_vm._s(this.nodeData.agentAddresss)+\"\\n        \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.toCheckOk),expression:\"toCheckOk\"}],staticClass:\"cursor-p text-d\",on:{\"click\":function($event){_vm.toCheck()}}},[_vm._v(_vm._s(_vm.$t('message.c5_1')))])]),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(_vm._s(_vm.$t('message.c17'))+\"：\")]),_vm._v(_vm._s(this.nodeData.commissionRate)+\"%\\n      \")]),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(_vm._s(_vm.$t('message.c25'))+\"：\")]),_vm._v(_vm._s(this.nodeData.deposit)+\" NULS\\n      \")]),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(_vm._s(_vm.$t('message.c19'))+\"：\")]),_vm._v(_vm._s(this.nodeData.memberCount)+\"\\n      \")]),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(_vm._s(_vm.$t('message.c18'))+\"：\")]),_vm._v(\" \"),_c('ProgressBar',{attrs:{\"colorData\":this.nodeData.creditVals < 0 ? '#f64b3e':'#82bd39',\"widthData\":this.nodeData.creditVal}}),_vm._v(\" \"),_c('span',[_vm._v(\" \"+_vm._s(this.nodeData.creditVals))])],1),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(_vm._s(_vm.$t('message.c64'))+\"：\")]),_vm._v(\" \"),_c('ProgressBar',{attrs:{\"colorData\":\"#58a5c9\",\"widthData\":this.nodeData.totalDeposit}}),_vm._v(\" \"),_c('span',[_vm._v(\" \"+_vm._s(this.nodeData.totalDeposits))])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"node-page-bottom\"},[_c('el-form',{ref:\"nodeForm\",attrs:{\"model\":_vm.nodeForm,\"rules\":_vm.nodeRules,\"size\":\"mini\",\"label-position\":\"left\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{staticClass:\"account-address\",attrs:{\"label\":_vm.$t('message.newAccountAddress')}},[_c('AccountAddressBar',{on:{\"chenckAccountAddress\":_vm.chenckAccountAddress}})],1),_vm._v(\" \"),_c('span',{staticClass:\"allUsable\"},[_vm._v(_vm._s(_vm.$t('message.currentBalance'))+\": \"+_vm._s(this.usable.toFixed(8))+\" NULS\")]),_vm._v(\" \"),_c('el-form-item',{staticClass:\"number\",attrs:{\"label\":_vm.$t('message.c25'),\"prop\":\"nodeNo\"}},[_c('el-input',{ref:\"input\",attrs:{\"maxlength\":17},on:{\"change\":_vm.countFee},model:{value:(_vm.nodeForm.nodeNo),callback:function ($$v) {_vm.$set(_vm.nodeForm, \"nodeNo\", $$v)},expression:\"nodeForm.nodeNo\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"procedure\",attrs:{\"label\":_vm.$t('message.c28')+' '+this.fee+' NULS'}}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"submit\",attrs:{\"size\":\"large\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"id\":\"nodePage\",\"disabled\":this.btOk},on:{\"click\":function($event){_vm.onSubmit('nodeForm')}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('message.confirmButtonText'))+\"\\n        \")])],1)],1)],1),_vm._v(\" \"),_c('Password',{ref:\"password\",attrs:{\"submitId\":_vm.submitId},on:{\"toSubmit\":_vm.toSubmit}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ff3a860\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/consensus/NodePage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ff3a860\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NodePage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NodePage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NodePage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ff3a860\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./NodePage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/consensus/NodePage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}